---
title: NuGet cross platform plug-in di autenticazione
description: NuGet cross platform autenticazione i plug-in per NuGet.exe, dotnet.exe, msbuild.exe e Visual Studio
author: nkolev92
ms.author: nikolev
ms.date: 07/01/2018
ms.topic: conceptual
ms.openlocfilehash: d80339eb81ade1cf2c323a604cc4fac06dcb1012
ms.sourcegitcommit: 09107c5092050f44a0c6abdfb21db73878f78bd0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/03/2018
ms.locfileid: "50981054"
---
# <a name="nuget-cross-platform-authentication-plugin"></a><span data-ttu-id="f7836-103">NuGet cross platform plug-in di autenticazione</span><span class="sxs-lookup"><span data-stu-id="f7836-103">NuGet cross platform authentication plugin</span></span>

<span data-ttu-id="f7836-104">Nella versione 4.8, NuGet tutti i client (NuGet.exe, Visual Studio, dotnet.exe e MSBuild.exe) possono usare un plug-in di autenticazione costruita basandosi sul [NuGet cross-platform plugins](NuGet-Cross-Platform-Plugins.md) modello.</span><span class="sxs-lookup"><span data-stu-id="f7836-104">In version 4.8+, all NuGet clients (NuGet.exe, Visual Studio, dotnet.exe and MSBuild.exe) can use an authentication plugin built on top of the [NuGet cross platform plugins](NuGet-Cross-Platform-Plugins.md) model.</span></span>

## <a name="authentication-in-dotnetexe"></a><span data-ttu-id="f7836-105">Autenticazione in dotnet.exe</span><span class="sxs-lookup"><span data-stu-id="f7836-105">Authentication in dotnet.exe</span></span>

<span data-ttu-id="f7836-106">Visual Studio e NuGet.exe sono per impostazione predefinita interattiva.</span><span class="sxs-lookup"><span data-stu-id="f7836-106">Visual Studio and NuGet.exe are by default interactive.</span></span> <span data-ttu-id="f7836-107">NuGet.exe contiene un'opzione per renderla [non interattivo](../../tools/nuget-exe-CLI-Reference.md).</span><span class="sxs-lookup"><span data-stu-id="f7836-107">NuGet.exe contains a switch to make it [non interactive](../../tools/nuget-exe-CLI-Reference.md).</span></span>
<span data-ttu-id="f7836-108">I plug-in Visual Studio e NuGet.exe inoltre richiesto l'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="f7836-108">Additionally the NuGet.exe and Visual Studio plugins prompt the user for input.</span></span>
<span data-ttu-id="f7836-109">Dotnet.exe non include alcuna richiesta di conferma e il valore predefinito è non interattivo.</span><span class="sxs-lookup"><span data-stu-id="f7836-109">In dotnet.exe there is no prompting and the default is non interactive.</span></span>

<span data-ttu-id="f7836-110">Il meccanismo di autenticazione in dotnet.exe è flusso del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f7836-110">The authentication mechanism in dotnet.exe is device flow.</span></span> <span data-ttu-id="f7836-111">Quando il ripristino o aggiungere l'operazione di pacchetti viene eseguita in modo interattivo, l'operazione si blocca e istruzioni per l'utente come a completa le autenticazioni verranno fornite nella riga di comando.</span><span class="sxs-lookup"><span data-stu-id="f7836-111">When the restore or add package operation is run interactively, the operation blocks and instructions to the user how to complete the authentications will be provided on the command line.</span></span>
<span data-ttu-id="f7836-112">L'operazione continuerà quando l'utente ha completato l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="f7836-112">When the user completes the authentication the operation will continue.</span></span>

<span data-ttu-id="f7836-113">Per effettuare l'operazione interattiva, uno deve passare `--interactive`.</span><span class="sxs-lookup"><span data-stu-id="f7836-113">To make the operation interactive, one should pass `--interactive`.</span></span>
<span data-ttu-id="f7836-114">Attualmente solo l'impostazione esplicita `dotnet restore` e `dotnet add package` comandi supportano un'opzione interattiva.</span><span class="sxs-lookup"><span data-stu-id="f7836-114">Currently only the explicit `dotnet restore` and `dotnet add package` commands support an interactive switch.</span></span>
<span data-ttu-id="f7836-115">Non include alcun commutatore interattivi `dotnet build` e `dotnet publish`.</span><span class="sxs-lookup"><span data-stu-id="f7836-115">There is no interactive switch on `dotnet build` and `dotnet publish`.</span></span>

## <a name="authentication-in-msbuild"></a><span data-ttu-id="f7836-116">Autenticazione in MSBuild</span><span class="sxs-lookup"><span data-stu-id="f7836-116">Authentication in MSBuild</span></span>

<span data-ttu-id="f7836-117">Analogamente a dotnet.exe, MSBuild.exe è per impostazione predefinita non che è il meccanismo di autenticazione MSBuild.exe interattiva flusso del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f7836-117">Similar to dotnet.exe, MSBuild.exe is by default non interactive the MSBuild.exe authentication mechanism is device flow.</span></span>
<span data-ttu-id="f7836-118">Per consentire il ripristino sospendere e in attesa per l'autenticazione, chiamare il ripristino con `msbuild /t:restore /p:NuGetInteractive="true"`.</span><span class="sxs-lookup"><span data-stu-id="f7836-118">To allow the restore to pause and wait for authentication, call restore with `msbuild /t:restore /p:NuGetInteractive="true"`.</span></span>

## <a name="creating-a-cross-platform-authentication-plugin"></a><span data-ttu-id="f7836-119">Creazione di un plug-in di autenticazione cross-platform</span><span class="sxs-lookup"><span data-stu-id="f7836-119">Creating a cross platform authentication plugin</span></span>

<span data-ttu-id="f7836-120">Un'implementazione di esempio sono disponibili nel [plug-in Provider di credenziali Microsoft](https://github.com/Microsoft/artifacts-credprovider).</span><span class="sxs-lookup"><span data-stu-id="f7836-120">A sample implementation can be found in [Microsoft Credential Provider plugin](https://github.com/Microsoft/artifacts-credprovider).</span></span>

<span data-ttu-id="f7836-121">È molto importante che i plug-in sia conforme ai requisiti di sicurezza stabiliti dagli strumenti client NuGet.</span><span class="sxs-lookup"><span data-stu-id="f7836-121">It's very important that the plugins conforms to the security requirements set forth by the NuGet client tools.</span></span>
<span data-ttu-id="f7836-122">È necessario almeno versione per un plug-in sia un plug-in di autenticazione *2.0.0*.</span><span class="sxs-lookup"><span data-stu-id="f7836-122">The minimum required version for a plugin to be an authentication plugin is *2.0.0*.</span></span>
<span data-ttu-id="f7836-123">NuGet esegue l'handshake con il plug-in e query per le attestazioni di operazione supportata.</span><span class="sxs-lookup"><span data-stu-id="f7836-123">NuGet will perform the handshake with the plugin and query for the supported operation claims.</span></span>
<span data-ttu-id="f7836-124">Fare riferimento a NuGet cross-platform plugin [i messaggi di protocollo](NuGet-Cross-Platform-Plugins.md#protocol-messages-index) per altri dettagli sui messaggi specifici.</span><span class="sxs-lookup"><span data-stu-id="f7836-124">Please refer to the NuGet cross platform plugin [protocol messages](NuGet-Cross-Platform-Plugins.md#protocol-messages-index) for more details about the specific messages.</span></span>

<span data-ttu-id="f7836-125">NuGet verrà impostato il livello di registrazione e fornire informazioni sul proxy per il plug-in quando applicabile.</span><span class="sxs-lookup"><span data-stu-id="f7836-125">NuGet will set the log level and provide proxy information to the plugin when applicable.</span></span>
<span data-ttu-id="f7836-126">La registrazione di NuGet console è accettabile solo dopo che NuGet ha impostato il livello di registrazione per il plug-in.</span><span class="sxs-lookup"><span data-stu-id="f7836-126">Logging to the NuGet console is only acceptable after NuGet has set the log level to the plugin.</span></span>

- <span data-ttu-id="f7836-127">Comportamento di autenticazione plug-in .NET framework</span><span class="sxs-lookup"><span data-stu-id="f7836-127">.NET Framework plugin authentication behavior</span></span>

<span data-ttu-id="f7836-128">In .NET Framework, i plug-in sono consentite per richiedere un input dell'utente, sotto forma di una finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f7836-128">In .NET Framework, the plugins are allowed to prompt a user for input, in the form of a dialog.</span></span>

- <span data-ttu-id="f7836-129">Comportamento di autenticazione plug-in .NET core</span><span class="sxs-lookup"><span data-stu-id="f7836-129">.NET Core plugin authentication behavior</span></span>

<span data-ttu-id="f7836-130">In .NET Core, non è possibile visualizzare una finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f7836-130">In .NET Core, a dialog cannot be shown.</span></span> <span data-ttu-id="f7836-131">I plug-in deve usare flow dispositivo per eseguire l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="f7836-131">The plugins should use device flow to authenticate.</span></span>
<span data-ttu-id="f7836-132">Il plug-in è possibile inviare i messaggi di log a NuGet con le istruzioni per l'utente.</span><span class="sxs-lookup"><span data-stu-id="f7836-132">The plugin can send log messages to NuGet with instructions to the user.</span></span>
<span data-ttu-id="f7836-133">Si noti che la registrazione sia disponibile dopo aver impostato il livello di registrazione per il plug-in.</span><span class="sxs-lookup"><span data-stu-id="f7836-133">Note that logging is available after the log level has been set to the plugin.</span></span>
<span data-ttu-id="f7836-134">NuGet non avrà alcun input interattivo dalla riga di comando.</span><span class="sxs-lookup"><span data-stu-id="f7836-134">NuGet will not take any interactive input from the command line.</span></span>

<span data-ttu-id="f7836-135">Quando il client chiama il plug-in con le credenziali di autenticazione un'introduzione, i plug-in necessario sono conformi al commutatore interattività e rispetta l'opzione della finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f7836-135">When the client calls the plugin with a Get Authentication Credentials, the plugins need to conform to the interactivity switch and respect the dialog switch.</span></span> 

<span data-ttu-id="f7836-136">La tabella seguente riepiloga il comportamento il plug-in per tutte le combinazioni.</span><span class="sxs-lookup"><span data-stu-id="f7836-136">The following table summarizes how the plugin should behave for all combinations.</span></span>

| <span data-ttu-id="f7836-137">IsNonInteractive</span><span class="sxs-lookup"><span data-stu-id="f7836-137">IsNonInteractive</span></span> | <span data-ttu-id="f7836-138">CanShowDialog</span><span class="sxs-lookup"><span data-stu-id="f7836-138">CanShowDialog</span></span> | <span data-ttu-id="f7836-139">Comportamento di plug-in</span><span class="sxs-lookup"><span data-stu-id="f7836-139">Plugin behavior</span></span> |
| ---------------- | ------------- | --------------- |
| <span data-ttu-id="f7836-140">true</span><span class="sxs-lookup"><span data-stu-id="f7836-140">true</span></span> | <span data-ttu-id="f7836-141">true</span><span class="sxs-lookup"><span data-stu-id="f7836-141">true</span></span> | <span data-ttu-id="f7836-142">Il commutatore IsNonInteractive ha la precedenza su commutatore la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f7836-142">The IsNonInteractive switch takes precedence over the dialog switch.</span></span> <span data-ttu-id="f7836-143">Il plug-in non è consentito per aprire una finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f7836-143">The plugin is not allowed to pop a dialog.</span></span> <span data-ttu-id="f7836-144">Questa combinazione è valida solo per i plug-in .NET Framework</span><span class="sxs-lookup"><span data-stu-id="f7836-144">This combination is only valid for .NET Framework plugins</span></span> |
| <span data-ttu-id="f7836-145">true</span><span class="sxs-lookup"><span data-stu-id="f7836-145">true</span></span> | <span data-ttu-id="f7836-146">False</span><span class="sxs-lookup"><span data-stu-id="f7836-146">false</span></span> | <span data-ttu-id="f7836-147">Il commutatore IsNonInteractive ha la precedenza su commutatore la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f7836-147">The IsNonInteractive switch takes precedence over the dialog switch.</span></span> <span data-ttu-id="f7836-148">Il plug-in non è consentito per bloccare.</span><span class="sxs-lookup"><span data-stu-id="f7836-148">The plugin is not allowed to block.</span></span> <span data-ttu-id="f7836-149">Questa combinazione è valida solo per i plug-in .NET Core</span><span class="sxs-lookup"><span data-stu-id="f7836-149">This combination is only valid for .NET Core plugins</span></span> |
| <span data-ttu-id="f7836-150">False</span><span class="sxs-lookup"><span data-stu-id="f7836-150">false</span></span> | <span data-ttu-id="f7836-151">true</span><span class="sxs-lookup"><span data-stu-id="f7836-151">true</span></span> | <span data-ttu-id="f7836-152">Il plug-in deve visualizzare una finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f7836-152">The plugin should show a dialog.</span></span> <span data-ttu-id="f7836-153">Questa combinazione è valida solo per i plug-in .NET Framework</span><span class="sxs-lookup"><span data-stu-id="f7836-153">This combination is only valid for .NET Framework plugins</span></span> |
| <span data-ttu-id="f7836-154">False</span><span class="sxs-lookup"><span data-stu-id="f7836-154">false</span></span> | <span data-ttu-id="f7836-155">False</span><span class="sxs-lookup"><span data-stu-id="f7836-155">false</span></span> | <span data-ttu-id="f7836-156">Il plug-in deve/can non è visualizzata una finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f7836-156">The plugin should/can not show a dialog.</span></span> <span data-ttu-id="f7836-157">Il plug-in deve usare flow dispositivo per l'autenticazione mediante la registrazione di un messaggio di istruzione tramite il logger.</span><span class="sxs-lookup"><span data-stu-id="f7836-157">The plugin should use device flow to authenticate by logging an instruction message via the logger.</span></span> <span data-ttu-id="f7836-158">Questa combinazione è valida solo per i plug-in .NET Core</span><span class="sxs-lookup"><span data-stu-id="f7836-158">This combination is only valid for .NET Core plugins</span></span> |

<span data-ttu-id="f7836-159">Prima di scrivere un plug-in, vedere le specifiche seguenti.</span><span class="sxs-lookup"><span data-stu-id="f7836-159">Please refer to the following specs before writing a plugin.</span></span>

- [<span data-ttu-id="f7836-160">Plug-in di Download del pacchetto NuGet</span><span class="sxs-lookup"><span data-stu-id="f7836-160">NuGet Package Download Plugin</span></span>](https://github.com/NuGet/Home/wiki/NuGet-Package-Download-Plugin)
- [<span data-ttu-id="f7836-161">NuGet cross-plat plug-in di autenticazione</span><span class="sxs-lookup"><span data-stu-id="f7836-161">NuGet cross plat authentication plugin</span></span>](https://github.com/NuGet/Home/wiki/NuGet-cross-plat-authentication-plugin)
