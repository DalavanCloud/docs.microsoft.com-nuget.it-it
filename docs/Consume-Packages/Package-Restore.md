---
title: Ripristino dei pacchetti NuGet | Microsoft Docs
author: kraigb
ms.author: kraigb
manager: ghogen
ms.date: 03/16/2018
ms.topic: article
ms.prod: nuget
ms.technology: ''
description: Panoramica della modalità di ripristino dei pacchetti NuGet da cui dipende un progetto, inclusa la procedura per disabilitare il ripristino e vincolare le versioni.
keywords: Ripristino di pacchetti NuGet, installazione di pacchetti NuGet, installazione pacchetto, ripristinare pacchetti, versioni con dipendenze, disabilitazione del ripristino automatico, vincolo delle versioni dei pacchetti
ms.reviewer:
- karann-msft
- unniravindranathan
ms.workload:
- dotnet
- aspnet
ms.openlocfilehash: d5c9c9f571ea25f8877f78c3fba114562d31fcd8
ms.sourcegitcommit: beb229893559824e8abd6ab16707fd5fe1c6ac26
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 03/28/2018
---
# <a name="package-restore"></a><span data-ttu-id="d9ac8-104">Ripristino di pacchetti</span><span class="sxs-lookup"><span data-stu-id="d9ac8-104">Package Restore</span></span>

<span data-ttu-id="d9ac8-105">Per ottenere un ambiente di sviluppo ordinato e ridurre le dimensioni dei repository, l'opzione **Ripristino pacchetto** NuGet installa tutte le dipendenze di un progetto elencate nel file di progetto o in `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-105">To promote a cleaner development environment and to reduce repository size, NuGet **Package Restore** installs all a project's dependencies as listed in either the project file or `packages.config`.</span></span> <span data-ttu-id="d9ac8-106">Visual Studio consente di ripristinare automaticamente i pacchetti al momento della compilazione di un progetto.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-106">Visual Studio can restore packages automatically when a project is built.</span></span> <span data-ttu-id="d9ac8-107">Anche i comandi `dotnet build` e `dotnet run` (.NET Core 2.0+) eseguono un ripristino automatico.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-107">The `dotnet build` and `dotnet run` commands (.NET Core 2.0+) also perform an automatic restore.</span></span> <span data-ttu-id="d9ac8-108">È anche possibile ripristinare i pacchetti in qualsiasi momento tramite Visual Studio, `nuget restore`, `dotnet restore` e xbuild su Mono.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-108">You can also restore packages at any time through Visual Studio, `nuget restore`, `dotnet restore`, and xbuild on Mono.</span></span>

<span data-ttu-id="d9ac8-109">Il ripristino dei pacchetti garantisce che tutte le dipendenze di un progetto siano disponibili senza archiviare tali pacchetti nel controllo del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-109">Package restore makes sure that all a project's dependencies are available without storing those packages in source control.</span></span> <span data-ttu-id="d9ac8-110">Vedere [Pacchetti e controllo del codice sorgente](../consume-packages/packages-and-source-control.md) per informazioni su come configurare il repository per escludere i file binari dei pacchetti.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-110">See [Packages and Source Control](../consume-packages/packages-and-source-control.md) on how to configure your repository to exclude package binaries.</span></span>

## <a name="package-restore-overview"></a><span data-ttu-id="d9ac8-111">Panoramica del ripristino dei pacchetti</span><span class="sxs-lookup"><span data-stu-id="d9ac8-111">Package restore overview</span></span>

<span data-ttu-id="d9ac8-112">Con il ripristino dei pacchetti vengono prima di tutto installate le dipendenze dirette di un progetto in base alle esigenze, quindi vengono installate le eventuali dipendenze dei pacchetti per tutto il grafico dipendenze.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-112">Restoring packages first installs the direct dependencies of a project as needed, then installs any dependencies of those packages throughout the entire dependency graph.</span></span>

<span data-ttu-id="d9ac8-113">Se un pacchetto non è già installato, NuGet tenta innanzitutto di recuperarlo dalla [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-113">If a package is not already installed, NuGet first attempts to retrieve it from the [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> <span data-ttu-id="d9ac8-114">Se il pacchetto non è presente nella cache, NuGet tenta di scaricare il pacchetto da tutte le origini abilitate (vedere [Configurazione del comportamento di NuGet](Configuring-NuGet-Behavior.md)). Le origini vengono visualizzate anche nell'elenco **Strumenti > Opzioni > Gestione pacchetti NuGet > Origini pacchetti** in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-114">If the package is not in the cache, NuGet then attempts to download the package from all enabled sources (see [Configuring NuGet behavior](Configuring-NuGet-Behavior.md); sources also appear in the  **Tools > Options > NuGet Package Manager > Package Sources** list in Visual Studio).</span></span> <span data-ttu-id="d9ac8-115">Durante il ripristino NuGet ignora l'ordine delle origini dei pacchetti e usa il pacchetto da qualsiasi origine risponde per prima alle richieste.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-115">During restore, NuGet ignores the order of package sources, using the package from whichever source is first to respond to requests.</span></span>

> [!Note]
> <span data-ttu-id="d9ac8-116">NuGet non indica un errore di ripristino di un pacchetto fino a quando non sono state controllate tutte le origini.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-116">NuGet does not indicate a failure to restore a package until all the sources have been checked.</span></span> <span data-ttu-id="d9ac8-117">In quel momento, NuGet segnala un errore solo per l'ultima origine nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-117">At that time, NuGet reports a failure for only the last source in the list.</span></span> <span data-ttu-id="d9ac8-118">Questo tipo di errore implica che il pacchetto non era presente in *alcuna* delle origini, anche se gli errori non vengono visualizzati singolarmente per ognuna di tali origini.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-118">The error implies that the package wasn't present on *any* of the other sources, even though errors are not shown for each of those sources individually.</span></span>

<span data-ttu-id="d9ac8-119">Il ripristino del pacchetto viene attivato nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="d9ac8-119">Package restore is triggered in the following ways:</span></span>

- <span data-ttu-id="d9ac8-120">**Interfaccia della riga di comando dotnet**: usare il comando [nuget restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x), che consente di ripristinare i pacchetti elencati nel file di progetto (vedere [PackageReference](../consume-packages/package-references-in-project-files.md)).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-120">**dotnet CLI**: use the [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) command, which restores packages listed in the project file (see [PackageReference](../consume-packages/package-references-in-project-files.md)).</span></span> <span data-ttu-id="d9ac8-121">Con .NET Core 2.0 e versioni successive, il ripristino viene eseguito automaticamente con `dotnet build` e `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-121">With .NET Core 2.0 and later, restore is done automatically with `dotnet build` and `dotnet run`.</span></span>

- <span data-ttu-id="d9ac8-122">**Interfaccia utente di Gestione pacchetti (Visual Studio in Windows)**: i pacchetti vengono ripristinati automaticamente quando si crea un progetto da un modello e quando si compila un progetto (in base all'opzione descritta in [Abilitazione e disabilitazione del ripristino dei pacchetti](#enabling-and-disabling-package-restore)).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-122">**Package Manager UI (Visual Studio on Windows)**: Packages are restored automatically when creating a project from a template and when building a project (subject to the option described in [Enabling and disabling package restore](#enabling-and-disabling-package-restore)).</span></span> <span data-ttu-id="d9ac8-123">In NuGet 4.0 +, il ripristino avviene automaticamente anche quando vengono apportate modifiche a un progetto basato su .NET Core SDK.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-123">In NuGet 4.0+, restore also happens automatically when changes are made to a .NET Core SDK-based project.</span></span>

    <span data-ttu-id="d9ac8-124">Per eseguire il ripristino manualmente, fare clic con il pulsante destro del mouse sulla soluzione in Esplora soluzioni e scegliere **Ripristina pacchetti NuGet**.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-124">To restore manually, right-click the solution in Solution Explorer and select **Restore NuGet Packages**.</span></span> <span data-ttu-id="d9ac8-125">Se uno o più pacchetti singoli non vengono ancora installati correttamente (Esplora soluzioni mostra un'icona di errore), usare l'interfaccia utente di Gestione pacchetti per disinstallare e reinstallare i pacchetti interessati.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-125">If one or more individual packages are still not installed properly (meaning that Solution Explorer shows an error icon), then use the Package Manager UI to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="d9ac8-126">Vedere [Reinstallazione e aggiornamento di pacchetti](../consume-packages/reinstalling-and-updating-packages.md)</span><span class="sxs-lookup"><span data-stu-id="d9ac8-126">See [Reinstalling and updating packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

    <span data-ttu-id="d9ac8-127">Se viene visualizzato l'errore "Questo progetto fa riferimento a uno o più pacchetti NuGet che non sono presenti in questo computer" o "Impossibile ripristinare uno o più pacchetti NuGet perché il consenso non è stato concesso", attivare il ripristino automatico seguendo le istruzioni in [Abilitazione e disabilitazione del ripristino dei pacchetti](#enabling-and-disabling-package-restore).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-127">If you see the error "This project references NuGet package(s) that are missing on this computer" or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," turn on automatic restore by following the instructions under [Enabling and disabling package restore](#enabling-and-disabling-package-restore).</span></span> <span data-ttu-id="d9ac8-128">Vedere anche [Risoluzione degli errori relativi al ripristino dei pacchetti](Package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-128">Also see [Package restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

- <span data-ttu-id="d9ac8-129">**Interfaccia della riga di comando NuGet**: usare il comando [nuget restore](../tools/cli-ref-restore.md), che consente di ripristinare i pacchetti elencati nel file di progetto o in `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-129">**NuGet CLI**: use the [nuget restore](../tools/cli-ref-restore.md) command, which restores packages listed in the project file or in `packages.config`.</span></span> <span data-ttu-id="d9ac8-130">È anche possibile specificare un file di soluzione.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-130">You can also specify a solution file.</span></span>

- <span data-ttu-id="d9ac8-131">**MSBuild**: usare il comando [msbuild /t:restore](../reference/msbuild-targets.md#restore-target), che consente di ripristinare i pacchetti elencati nel file di progetto (solo PackageReference).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-131">**MSBuild**: use the [msbuild /t:restore](../reference/msbuild-targets.md#restore-target) command, which restores packages packages listed in the project file (PackageReference only).</span></span> <span data-ttu-id="d9ac8-132">Disponibile solo in NuGet 4.x+ e MSBuild 15.1 +, inclusi con Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-132">Available only in NuGet 4.x+ and MSBuild 15.1+, which are included with Visual Studio 2017.</span></span> <span data-ttu-id="d9ac8-133">Sia `nuget restore` che `dotnet restore` usano questo comando per i progetti applicabili.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-133">`nuget restore` and `dotnet restore` both use this command for applicable projects.</span></span>

- <span data-ttu-id="d9ac8-134">**Visual Studio Team Services**: quando si crea una definizione di compilazione in Team Services, includere l'attività di [ripristino NuGet](/vsts/build-release/tasks/package/nuget#restore-nuget-packages) o di [ripristino .NET Core](/vsts/build-release/tasks/build/dotnet-core#restore-nuget-packages) nella definizione prima di qualsiasi attività di compilazione.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-134">**Visual Studio Team Services**: When creating a build definition on Team Services, include the [NuGet restore](/vsts/build-release/tasks/package/nuget#restore-nuget-packages) or [.NET Core Restore](/vsts/build-release/tasks/build/dotnet-core#restore-nuget-packages) task in the definition before any build task.</span></span> <span data-ttu-id="d9ac8-135">Questa attività è inclusa per impostazione predefinita in vari modelli di compilazione.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-135">This task is included by default in a number of build templates.</span></span>

- <span data-ttu-id="d9ac8-136">**Team Foundation Server**: con TFS 2013 e versioni successive, i pacchetti vengono ripristinati automaticamente durante la compilazione, a condizione di usare un modello di Team Build per TFS 2013 o versioni successive.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-136">**Team Foundation Server**: TFS 2013 and later automatically restores packages during build, provided that you're using a Team Build Template for TFS 2013 or later.</span></span> <span data-ttu-id="d9ac8-137">Per una versione precedente di TFS, è possibile includere un passaggio di compilazione per richiamare una delle opzioni di ripristino da riga di comando descritte in precedenza.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-137">For earlier version of TFS, you can include a build step to invoke one of the command-line restore options above.</span></span> <span data-ttu-id="d9ac8-138">Facoltativamente, è possibile eseguire la migrazione del modello di compilazione a TFS 2013.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-138">You can optionally migrate the build template to TFS 2013.</span></span> <span data-ttu-id="d9ac8-139">Per altre informazioni, vedere [Procedura dettagliata per il ripristino dei pacchetti con Team Foundation Build](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-139">For more information, see the [Walkthrough of package restore with Team Foundation Build](../consume-packages/team-foundation-build.md).</span></span>

## <a name="enabling-and-disabling-package-restore"></a><span data-ttu-id="d9ac8-140">Abilitazione e disabilitazione del ripristino dei pacchetti</span><span class="sxs-lookup"><span data-stu-id="d9ac8-140">Enabling and disabling package restore</span></span>

<span data-ttu-id="d9ac8-141">Il ripristino dei pacchetti viene abilitato principalmente tramite **Strumenti > Opzioni > Gestione pacchetti NuGet** in Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="d9ac8-141">Package restore is primarily enabled through **Tools > Options > NuGet Package Manager** in Visual Studio:</span></span>

![Controllo dei comportamenti di ripristino dei pacchetti tramite le opzioni di Gestione pacchetti NuGet](media/Restore-01-AutoRestoreOptions.png)

- <span data-ttu-id="d9ac8-143">**Consenti a NuGet di scaricare i pacchetti mancanti**: controlla tutte le forme di ripristino dei pacchetti modificando l'impostazione `packageRestore/enabled` nel file `NuGet.Config` come illustrato di seguito (`%AppData%\NuGet\NuGet.Config` in Windows, `~/.nuget/NuGet/NuGet.Config` in Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-143">**Allow NuGet to download missing packages**: controls all forms of package restore by changing the `packageRestore/enabled` setting in the `NuGet.Config` file as shown below (`%AppData%\NuGet\NuGet.Config` on Windows, `~/.nuget/NuGet/NuGet.Config` on Mac/Linux).</span></span> <span data-ttu-id="d9ac8-144">In Visual Studio, questa impostazione consente il funzionamento del comando **Ripristina pacchetti NuGet** nel menu di scelta rapida della soluzione.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-144">In Visual Studio, this setting allows the **Restore NuGet Packages** command on the solution's context menu to work.</span></span>

    ```xml
    <configuration>
        <packageRestore>
            <!-- The 'enabled' key is True when the "Allow NuGet to download missing packages" checkbox is set.
                 Clearing the box sets this to False, disabling command-line, automatic, and MSBuild-Integrated restore. -->
            <add key="enabled" value="True" />
        </packageRestore>
    </configuration>
    ```
    <br/>
    > [!Note]
    >  <span data-ttu-id="d9ac8-145">L'impostazione `packageRestore/enabled` può essere sovrascritta a livello globale impostando una variabile d'ambiente denominata **EnableNuGetPackageRestore** con valore TRUE o FALSE prima di avviare Visual Studio o una compilazione.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-145">The `packageRestore/enabled` setting can be overridden globally by setting an environment variable called **EnableNuGetPackageRestore** with a value of TRUE or FALSE before launching Visual Studio or starting a build.</span></span>

- <span data-ttu-id="d9ac8-146">**Verificare in automatico i pacchetti mancanti durante il build in Visual Studio**: controlla il ripristino automatico modificando l'impostazione `packageRestore/automatic` nel file `NuGet.Config` come illustrato di seguito (`%AppData%\NuGet\NuGet.Config` in Windows, `~/.nuget/NuGet/NuGet.Config` in Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-146">**Automatically check for missing packages during build in Visual Studio**: controls automatic restore by changing the `packageRestore/automatic` setting in the `NuGet.Config` file as shown below (`%AppData%\NuGet\NuGet.Config` on Windows, `~/.nuget/NuGet/NuGet.Config` on Mac/Linux).</span></span> <span data-ttu-id="d9ac8-147">Quando questa opzione è impostata, l'esecuzione di una compilazione da Visual Studio ripristina automaticamente gli eventuali pacchetti mancanti.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-147">When this option is set, running a build from Visual Studio automatically restores any missing packages.</span></span> <span data-ttu-id="d9ac8-148">Questa opzione non ha effetti sulle compilazioni eseguite dalla riga di comando tramite MSBuild.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-148">The option does not affect builds run from the command line using MSBuild.</span></span>

    ```xml
    ...
    <configuration>
        <packageRestore>
            <!-- The 'automatic' key is set to True when the "Automatically check for missing packages during
                 build in Visual Studio" checkbox is set. Clearing the box sets this to False and disables
                 automatic restore. -->
            <add key="automatic" value="True" />
        </packageRestore>
    </configuration>
    ```

<span data-ttu-id="d9ac8-149">Per riferimento, vedere il [file di configurazione di NuGet - sezione packageRestore](../reference/nuget-config-file.md#packagerestore-section).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-149">For reference, see the [NuGet config file - packageRestore section](../reference/nuget-config-file.md#packagerestore-section).</span></span>

<span data-ttu-id="d9ac8-150">In alcuni casi, uno sviluppatore o una società potrebbe avere l'esigenza di abilitare o disabilitare il ripristino dei pacchetti per tutti gli utenti in un computer.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-150">In some cases, a developer or company might want to enable or disable package restore for all users on a computer.</span></span> <span data-ttu-id="d9ac8-151">A tale scopo, aggiungere le stesse impostazioni di cui sopra al file di configurazione NuGet globale che si trova in `%ProgramData%\NuGet\Config` (Windows, potenzialmente in una cartella `\{IDE}\{Version}\{SKU}\` specifica per Visual Studio) o in `~/.local/share` (Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-151">To do this, add the same settings above to the global NuGet configuration file located in `%ProgramData%\NuGet\Config` (Windows, potentially under a specific `\{IDE}\{Version}\{SKU}\` folder for Visual Studio) or `~/.local/share` (Mac/Linux).</span></span> <span data-ttu-id="d9ac8-152">I singoli utenti possono quindi abilitare il ripristino in modo selettivo, in base alle esigenze a livello di progetto.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-152">Individual users can then selectively enable restore as needed on a project level.</span></span> <span data-ttu-id="d9ac8-153">Vedere [Configurazione del comportamento di NuGet](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied) per informazioni dettagliate esatte su come NuGet assegna la priorità a più file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-153">See [Configuring NuGet behavior](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied) for exact details on how NuGet prioritizes multiple config files.</span></span>

> [!Important]
> <span data-ttu-id="d9ac8-154">Se si modificano le impostazioni `packageRestore` direttamente in `nuget.config`, riavviare Visual Studio per visualizzare i valori correnti nella finestra di dialogo Opzioni.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-154">If you edit the `packageRestore` settings directly in `nuget.config`, restart Visual Studio so that the options dialog box shows the current values.</span></span>

## <a name="constraining-package-versions-with-restore"></a><span data-ttu-id="d9ac8-155">Vincolo delle versioni dei pacchetti con il ripristino</span><span class="sxs-lookup"><span data-stu-id="d9ac8-155">Constraining package versions with restore</span></span>

<span data-ttu-id="d9ac8-156">Durante il ripristino di pacchetti con qualsiasi metodo, NuGet rispetta gli eventuali vincoli specificati in `packages.config` o nel file di progetto:</span><span class="sxs-lookup"><span data-stu-id="d9ac8-156">When restoring packages through any method, NuGet honors any constraints specified in `packages.config` or the project file:</span></span>

- <span data-ttu-id="d9ac8-157">`packages.config`: specificare un intervallo di versioni nella proprietà `allowedVersion` della dipendenza.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-157">`packages.config`: Specify a version range in the `allowedVersion` property of the dependency.</span></span> <span data-ttu-id="d9ac8-158">Vedere [Reinstallazione e aggiornamento di pacchetti](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-158">See [Reinstalling and updating packages](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span></span> <span data-ttu-id="d9ac8-159">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="d9ac8-159">For example:</span></span>

    ```xml
    <package id="Newtonsoft.json" version="6.0.4" allowedVersions="[6,7)" />
    ```

- <span data-ttu-id="d9ac8-160">File di progetto (PackageReference): specificare un intervallo di versioni direttamente con il numero di versione della dipendenza.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-160">Project file (PackageReference): Specify a version range directly with the dependency's version number.</span></span> <span data-ttu-id="d9ac8-161">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="d9ac8-161">For example:</span></span>

    ```xml
    <PackageReference Include="Newtonsoft.json" Version="[6, 7)" />
    ```

<span data-ttu-id="d9ac8-162">In tutti i casi, usare la notazione descritta in [Controllo delle versioni dei pacchetti](../reference/package-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-162">In all cases, use the notation described in [Package versioning](../reference/package-versioning.md).</span></span>

## <a name="forcing-restore-from-package-sources"></a><span data-ttu-id="d9ac8-163">Forzare il ripristino dalle origini dei pacchetti</span><span class="sxs-lookup"><span data-stu-id="d9ac8-163">Forcing restore from package sources</span></span>

<span data-ttu-id="d9ac8-164">Per impostazione predefinita, le operazioni di ripristino NuGet usano i pacchetti dalle cartelle *global-packages* e *http-cache*, descritte in [Gestione delle cartelle dei pacchetti globali e della cache](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-164">By default, NuGet restore operations use packages from the *global-packages* and *http-cache* folders, which are described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

<span data-ttu-id="d9ac8-165">Per evitare di usare la cartella *global-packages*, eseguire una delle operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="d9ac8-165">To avoid using the *global-packages* folder, do one of the following:</span></span>

- <span data-ttu-id="d9ac8-166">Cancellare la cartella con `nuget locals global-packages -clear` o `dotnet nuget locals global-packages --clear`</span><span class="sxs-lookup"><span data-stu-id="d9ac8-166">Clear the folder using `nuget locals global-packages -clear` or `dotnet nuget locals global-packages --clear`</span></span>
- <span data-ttu-id="d9ac8-167">Modificare temporaneamente la posizione della cartella *global-packages* prima dell'operazione di ripristino usando uno dei metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="d9ac8-167">Temporarily change the location of the *global-packages* folder before the restore operation using one of the following methods:</span></span>
  - <span data-ttu-id="d9ac8-168">Impostare la variabile di ambiente NUGET_PACKAGES su una cartella diversa.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-168">Set the NUGET_PACKAGES environment variable to a different folder.</span></span>
  - <span data-ttu-id="d9ac8-169">Creare un file `NuGet.Config` che imposta `globalPackagesFolder` (se si usa PackageReference) o `repositoryPath` (se si usa `packages.config`) su una cartella diversa. Vedere le [impostazioni di configurazione](../reference/nuget-config-file.md#config-section).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-169">Create a `NuGet.Config` file that sets `globalPackagesFolder` (if using PackageReference) or `repositoryPath` (if using `packages.config`) to a different folder (see [configuration settings](../reference/nuget-config-file.md#config-section)</span></span>
  - <span data-ttu-id="d9ac8-170">Solo MSBuild: specificare un'altra cartella con la proprietà `RestorePackagesPath`.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-170">MSBuild only: specify a different folder with the `RestorePackagesPath` property.</span></span>

<span data-ttu-id="d9ac8-171">Per evitare di usare la cache per le origini HTTP, eseguire una delle operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="d9ac8-171">To avoid using the cache for HTTP sources, do one of the following:</span></span>

- <span data-ttu-id="d9ac8-172">Usare l'opzione `-NoCache` con `nuget restore` o l'opzione `--no-cache` con `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-172">Use the `-NoCache` option with `nuget restore` or the `--no-cache` option with `dotnet restore`.</span></span> <span data-ttu-id="d9ac8-173">Queste opzioni non influiscono sulle operazioni di ripristino tramite l'interfaccia utente o la console di Gestione pacchetti di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-173">These options do not affect restore operations through the Visual Studio Package Manager UI or Console.</span></span>
- <span data-ttu-id="d9ac8-174">Cancellare la cache con `nuget locals http-cache -clear` o `dotnet nuget locals http-cache --clear`.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-174">Clear the cache using `nuget locals http-cache -clear` or `dotnet nuget locals http-cache --clear`.</span></span>
- <span data-ttu-id="d9ac8-175">Impostare temporaneamente la variabile di ambiente NUGET_HTTP_CACHE_PATH su una cartella diversa.</span><span class="sxs-lookup"><span data-stu-id="d9ac8-175">Temporarily set of the NUGET_HTTP_CACHE_PATH environment variable to a different folder.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="d9ac8-176">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="d9ac8-176">Troubleshooting</span></span>

<span data-ttu-id="d9ac8-177">Vedere [Risoluzione degli errori relativi al ripristino dei pacchetti](package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="d9ac8-177">See [Troubleshooting package restore](package-restore-troubleshooting.md).</span></span>